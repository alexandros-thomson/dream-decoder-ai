<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Dream Decoder - AI-powered personal dream journal with symbol interpretation and pattern analysis">
    <meta name="theme-color" content="#4F46E5">
    <link rel="manifest" href="manifest.json">
    <link rel="apple-touch-icon" href="https://via.placeholder.com/192">
    <title>Dream Decoder</title>
    <script>
        // AdSense Integration
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-7835415696634246",
            enable_page_level_ads: true
        });
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7835415696634246" crossorigin="anonymous"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; color: #1a202c; }
        .container { max-width: 800px; margin: 0 auto; }
        header { text-align: center; color: white; margin-bottom: 30px; }
        header h1 { font-size: 2.5rem; margin-bottom: 10px; }
        header p { font-size: 1.1rem; opacity: 0.9; }
        .premium-banner { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); color: white; padding: 20px; border-radius: 12px; margin-bottom: 20px; text-align: center; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .premium-banner h2 { margin-bottom: 10px; }
        .premium-btn { background: white; color: #f5576c; padding: 12px 24px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; }
        .premium-btn:hover { transform: scale(1.05); }
        .card { background: white; border-radius: 16px; padding: 24px; margin-bottom: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.2); }
        .dream-form { display: flex; flex-direction: column; gap: 15px; }
        .dream-form input, .dream-form textarea { padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 16px; font-family: inherit; }
        .dream-form textarea { min-height: 120px; resize: vertical; }
        .dream-form button { background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 14px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; }
        .dream-form button:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); }
        #dreamList { display: flex; flex-direction: column; gap: 15px; }
        .dream-entry { background: #f7fafc; padding: 16px; border-radius: 12px; border-left: 4px solid #667eea; }
        .dream-entry h3 { color: #2d3748; margin-bottom: 8px; }
        .dream-entry .date { color: #718096; font-size: 0.9rem; margin-bottom: 8px; }
        .dream-entry .content { color: #4a5568; line-height: 1.6; }
        .dream-entry .ai-analysis { background: #edf2f7; padding: 12px; border-radius: 8px; margin-top: 12px; border-left: 3px solid #4299e1; }
        .dream-entry .ai-analysis h4 { color: #2c5282; margin-bottom: 6px; font-size: 0.95rem; }
        .dream-entry .ai-analysis p { color: #2d3748; font-size: 0.9rem; line-height: 1.5; }
        .delete-btn { background: #fc8181; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-top: 10px; }
        .ad-space { margin: 20px 0; min-height: 100px; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Premium Upgrade Banner -->
        <div class="premium-banner">
            <h2>ðŸŒŸ Unlock Premium Features</h2>
            <p>Get unlimited dream entries, advanced AI analysis, and exclusive pattern insights for just $4.99/month</p>
            <button class="premium-btn" onclick="window.open('https://buy.stripe.com/test_28o00W9h75KH9wc146', '_blank')">Upgrade to Premium</button>
        </div>

        <header>
            <h1>ðŸŒ™ Dream Decoder</h1>
            <p>AI-powered dream journal with symbol interpretation and pattern analysis</p>
        </header>

        <!-- AdSense Ad Unit 1 -->
        <div class="ad-space">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-7835415696634246"
                 data-ad-slot="1234567890"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div class="card">
            <h2>Record Your Dream</h2>
            <form class="dream-form" id="dreamForm">
                <input type="text" id="dreamTitle" placeholder="Dream title..." required>
                <textarea id="dreamContent" placeholder="Describe your dream in detail..." required></textarea>
                <button type="submit">ðŸ’« Analyze Dream</button>
            </form>
        </div>

        <!-- AdSense Ad Unit 2 -->
        <div class="ad-space">
            <ins class="adsbygoogle"
                 style="display:block"
                 data-ad-client="ca-pub-7835415696634246"
                 data-ad-slot="9876543210"
                 data-ad-format="auto"
                 data-full-width-responsive="true"></ins>
            <script>
                 (adsbygoogle = window.adsbygoogle || []).push({});
            </script>
        </div>

        <div class="card">
            <h2>Your Dreams</h2>
            <div id="dreamList"></div>
        </div>
    </div>

    <script>
        // Service Worker Registration
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/service-worker.js');
        }

        // Dream Storage
        let dreams = JSON.parse(localStorage.getItem('dreams')) || [];

        // AI Dream Analysis Simulation
        function analyzeDream(content) {
            const symbols = {
                'water': 'emotions, unconscious mind',
                'flying': 'freedom, ambition',
                'falling': 'loss of control, anxiety',
                'chase': 'avoiding something, fear',
                'death': 'transformation, new beginnings',
                'house': 'self, psyche',
                'snake': 'healing, transformation',
                'dog': 'loyalty, friendship'
            };
            
            let analysis = 'This dream suggests ';
            const lowerContent = content.toLowerCase();
            const foundSymbols = [];
            
            for (const [symbol, meaning] of Object.entries(symbols)) {
                if (lowerContent.includes(symbol)) {
                    foundSymbols.push(`${symbol} (${meaning})`);
                }
            }
            
            if (foundSymbols.length > 0) {
                analysis += 'themes related to: ' + foundSymbols.join(', ') + '.';
            } else {
                analysis += 'a personal journey exploring your subconscious thoughts and feelings.';
            }
            
            return analysis;
        }

        // Save Dream
        document.getElementById('dreamForm').addEventListener('submit', (e) => {
            e.preventDefault();
            
            const title = document.getElementById('dreamTitle').value;
            const content = document.getElementById('dreamContent').value;
            const analysis = analyzeDream(content);
            
            const dream = {
                id: Date.now(),
                title,
                content,
                analysis,
                date: new Date().toLocaleDateString()
            };
            
            dreams.unshift(dream);
            localStorage.setItem('dreams', JSON.stringify(dreams));
            
            displayDreams();
            
            document.getElementById('dreamTitle').value = '';
            document.getElementById('dreamContent').value = '';
        });

        // Display Dreams
        function displayDreams() {
            const dreamList = document.getElementById('dreamList');
            dreamList.innerHTML = '';
            
            dreams.forEach(dream => {
                const dreamEntry = document.createElement('div');
                dreamEntry.className = 'dream-entry';
                dreamEntry.innerHTML = `
                    <h3>${dream.title}</h3>
                    <div class="date">${dream.date}</div>
                    <div class="content">${dream.content}</div>
                    <div class="ai-analysis">
                        <h4>ðŸ”® AI Analysis</h4>
                        <p>${dream.analysis}</p>
                    </div>
                    <button class="delete-btn" onclick="deleteDream(${dream.id})">Delete</button>
                `;
                dreamList.appendChild(dreamEntry);
            });
        }

        // Delete Dream
        function deleteDream(id) {
            dreams = dreams.filter(d => d.id !== id);
            localStorage.setItem('dreams', JSON.stringify(dreams));
            displayDreams();
        }

        // Initial Display
        displayDreams();
    </script>
</body>
</html>
